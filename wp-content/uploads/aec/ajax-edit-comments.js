var wpajaxeditcomments = {AEC_BlogUrl : 'http://simoncoles.org/wp-admin/admin-ajax.php',AEC_CanScroll : 'true',AEC_Minutes : 'minutes',AEC_Minute : 'minute',AEC_And : 'and',AEC_Seconds : 'seconds',AEC_Second : 'second',AEC_Moderation : 'Mark for Moderation?',AEC_Approve : 'Approve Comment?',AEC_Spam : 'Mark as Spam?',AEC_Delete : 'Delete this comment?',AEC_Anon : 'Anonymous',AEC_Loading : 'Loading...',AEC_Ready : 'Ready',AEC_Sending : 'Sending...',AEC_Sent : 'Message Sent',AEC_LoadSuccessful : 'Comment Loaded Successfully',AEC_Saving : 'Saving...',AEC_Blacklisting : 'Blacklisting...',AEC_Saved : 'Comment Successfully Saved',AEC_Delink : 'De-link Successful',AEC_MoreOptions : 'More Options',AEC_LessOptions : 'Less Options',AEC_UseRTL : 'false',AEC_RequestDeletionSuccess : 'Request has been sent successfully',AEC_RequestError : 'Error sending request',AEC_approving : 'Approving...',AEC_delinking : 'De-linking...',AEC_moderating : 'Moderating...',AEC_spamming : 'Spamming...',AEC_deleting : 'Deleting...',AEC_restoring : 'Restoring...',AEC_restored : 'Comment Restored.',AEC_undoing : 'Undoing...',AEC_undosuccess : 'Undo Successful',AEC_permdelete : 'Comment Deleted Permanently',AEC_fieldsrequired : 'Input Fields are Required',AEC_emailaddresserror : 'E-mail Address is Invalid',AEC_AftertheDeadline : 'true',AEC_AftertheDeadline_lang : 'en',AEC_Expand : 'true',AEC_Yes : 'Yes',AEC_No : 'No',AEC_Sure : 'Are you sure?',AEC_colorbox_width : '580',AEC_colorbox_height : '560'};jQuery(document).ready(function(){function l(a){b("body").append("<span class='aec-dropdown-container' id='aec-dropdown-container-"+a+"'>"+b("#aec-dropdown-"+a).html()+"</span>");b("#aec-dropdown-container-"+a).css("top",parseInt(b("#aec-dropdownlink-"+a).offset().top)+parseInt(b("#aec-dropdownlink-"+a).outerHeight())+5+"px");b("#aec-dropdown-container-"+a).css("left",b("#aec-dropdownlink-"+a).offset().left);b("#aec-dropdownlink-text-"+a).text(wpajaxeditcomments.AEC_LessOptions);b("#aec-dropdownlink-"+ a).removeAttr("onclick");b.support.noCloneEvent!=!1&&(b("#aec-dropdownlink-"+a).removeClass("aec-dropdownlink"),b("#aec-dropdownlink-"+a).addClass("aec-dropdownlink-less"));b("#aec-dropdownlink-"+a).bind("click",function(){return!1});b("#aec-dropdown-container-"+a).slideDown("",function(){b.support.noCloneEvent==!1&&(b("#aec-dropdownlink-"+a).removeClass("aec-dropdownlink"),b("#aec-dropdownlink-"+a).addClass("aec-dropdownlink-less"));b("#aec-dropdown-container-"+a).focus();b("#aec-dropdownlink-"+ a).unbind("mouseup");b("#aec-dropdownlink-"+a).bind("mouseup",function(){f(a);return!1});b("#aec-dropdown-container-"+a).focus()})}function f(a){if(b(".aec-dropdown-container").length==0)return!1;b("#aec-dropdownlink-text-"+a).text(wpajaxeditcomments.AEC_MoreOptions);b("#aec-dropdown-"+a).html(b("#aec-dropdown-container-"+a).html());b("#aec-dropdown-container-"+a).slideUp("",function(){b("#aec-dropdown-container-"+a).remove();b("#aec-dropdownlink-"+a).removeClass("aec-dropdownlink-less");b("#aec-dropdownlink-"+ a).addClass("aec-dropdownlink");b("#aec-dropdownlink-"+a).unbind("blur");b("#aec-dropdown-container-"+a).unbind("blur");b("#aec-dropdown-container-"+a).unbind("mouseleave");b("#aec-dropdownlink-"+a).unbind("mouseup");b("#aec-dropdownlink-"+a).bind("mouseup",function(){l(a);return!1})})}function n(a){var c=d(b(a));b(".undo"+c.cid).parent().html("");c.action="undo";jQuery.post(ajaxurl,c,function(a){if(typeof a.error!="undefined")alert(a.error);else{b("#comment-undo-"+c.cid).html(wpajaxeditcomments.AEC_undosuccess); var e=a.comment_author,d=a.comment_author_url,k=a.comment_date;jQuery.ajaxeditcomments.update_comment("edit-comment"+c.cid,a.content);jQuery.ajaxeditcomments.update_author("edit-author"+c.cid,e,d);jQuery.ajaxeditcomments.update_date_or_time("aecdate"+c.cid,k);b("#edit-comment-admin-links"+c.cid).html(a.comment_links);b("#comment-"+c.cid+" .comment-count").html(a.approve_count);b(".spam-count").html(a.spam_count);b(".pending-count").html(a.moderation_count)}},"json")}function o(){var a=b(".ajax-edit-time-left").length, c=[],h=0;b(".ajax-edit-time-left").each(function(){data=d(b(this).prev());data=b.extend(data,{action:"getthetimeleft",cid:data.cid,pid:data.pid,_ajax_nonce:data.nonce});data.action="getthetimeleft";jQuery.post(ajaxurl,data,function(e){h+=1;var d=e.cid;if(!(typeof e.error!="undefined"||typeof e.success!="undefined")){var k=parseInt(e.minutes),f=parseInt(e.seconds),e=b("#ajax-edit-time-left-"+e.cid),d={minutes:k,seconds:f,cid:d,element:e};c[b(c).length]=d;if(h==a)i.timers=setInterval(function(){jQuery.ajaxeditcomments.get_timer(c)}, 1E3)}},"json")})}function p(a){var c=[];b(a).length==0?clearTimeout(i.timers):(b(a).each(function(){seconds=this.seconds-1;minutes=this.minutes;element=this.element;if(minutes<=0&&seconds<=0){b("#edit"+this.cid).unbind();element.remove();b("#edit-comment-user-link-"+this.cid).remove();try{if(document.getElementById("cboxIframe")!=void 0){var a=document.getElementById("cboxIframe"),e=a.contentWindow||a.contentDocument;if(e.document)e=e.document;b("#timer"+this.cid,e).length>0&&jQuery.fn.colorbox.close()}}catch(d){}}else{c[b(c).length]= this;seconds<0&&(minutes-=1,seconds=59);var f="";minutes>=1&&(f=minutes>=2?minutes+" "+wpajaxeditcomments.AEC_Minutes:minutes+" "+wpajaxeditcomments.AEC_Minute,seconds>0&&(f+=" "+wpajaxeditcomments.AEC_And+" "));seconds>0&&(f+=seconds>=2?seconds+" "+wpajaxeditcomments.AEC_Seconds:seconds+" "+wpajaxeditcomments.AEC_Second);try{if(document.getElementById("cboxIframe")!=void 0){a=document.getElementById("cboxIframe");e=a.contentWindow||a.contentDocument;if(e.document)e=e.document;b("#timer"+this.cid, e).html("&nbsp;("+f+")")}}catch(g){}b("#ajax-edit-time-left-"+this.cid).html("&nbsp;("+f+")");this.seconds=seconds;this.minutes=minutes}}),clearTimeout(i.timers),i.timers=setInterval(function(){jQuery.ajaxeditcomments.get_timer(c)},1E3))}function d(a){var b={},a=m(a.attr("href"));b.aecurl=a;b._ajax_nonce=a._wpnonce;b.cid=a.cid;b.pid=a.pid;b.action=a.action;return b}function q(a){var c=d(b(a));f(c.cid);jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_delinking,!1);jQuery.post(ajaxurl, c,function(a){typeof a.error!="undefined"?alert(a.error):(b.ajaxeditcomments.update_comment("edit-comment"+c.cid,a.content),a.comment_author_url==""&&(b("#the-comment-list #comment-"+c.cid+" A:first").html(""),b(".aec-delink-"+c.cid+",#delink-"+c.cid).hide(),b("#edit-author"+c.cid).html(b("#edit-author"+c.cid+" A").html()),jQuery.ajaxeditcomments.undo_message(c.cid,a.undo,!0)))},"json")}function g(a){a=b(a);try{uagent=navigator.userAgent.toLowerCase();if(uagent.search("iphone")>-1)return!0;if(uagent.search("ipod")> -1)return!0;if(uagent.search("webkit")>-1&&uagent.search("series60")>-1&&uagent.search("symbian")>-1)return!0;if(uagent.search("android")>-1)return!0;if(uagent.search("windows ce")>-1)return!0;if(uagent.search("blackberry")>-1)return!0;if(uagent.search("palm")>-1)return!0}catch(c){}var h=d(a);f(h.cid);b("a#"+a.attr("id")).colorbox({iframe:!0,scrolling:!1,width:wpajaxeditcomments.AEC_colorbox_width,height:wpajaxeditcomments.AEC_colorbox_height,opacity:0.6});b("a#"+a.attr("id")).trigger("click.colorbox"); return!1}function j(a,c){typeof a.error!="undefined"?alert(a.error):(b("#edit-comment-admin-links"+c).html(a.comment_links),b("#comment-"+c+" .comment-count").html(a.approve_count),b(".spam-count").html(a.spam_count),b(".pending-count").html(a.moderation_count),b(".trash-count").html(a.trash_count),jQuery.ajaxeditcomments.undo_message(c,a.undo,!0))}function r(a){var c=d(b(a));f(c.cid);jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_approving,!1);jQuery.post(ajaxurl, c,function(a){j(a,c.cid)},"json")}function s(a){var c=d(b(a));f(c.cid);jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_spamming,!1);jQuery.post(ajaxurl,c,function(a){j(a,c.cid)},"json")}function t(a){var c=d(b(a));f(c.cid);jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_moderating,!1);jQuery.post(ajaxurl,c,function(a){j(a,c.cid)},"json")}function u(a){var c=d(b(a));f(c.cid);jQuery.ajaxeditcomments.undo_message(c.cid, wpajaxeditcomments.AEC_deleting,!1);jQuery.post(ajaxurl,c,function(a){b(".aec-delete-"+c.cid).hide();b("#delete-"+c.cid).hide();j(a,c.cid);b("#edit-comment-admin-links"+c.cid).html("")},"json")}function v(a){var c=d(b(a));jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_Sure+" <a href='#' id='aecconfirmyes"+c.cid+"'>"+wpajaxeditcomments.AEC_Yes+"</a> - <a href='#' id='aecconfirmno"+c.cid+"'>"+wpajaxeditcomments.AEC_No+"</a>",!1);b("#aecconfirmyes"+c.cid).bind("click", function(){jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_deleting,!1);jQuery.post(ajaxurl,c,function(a){typeof a.error!="undefined"?(b("#comment-undo-"+a.cid).html(""),alert(a.error)):(b("#comment-undo-"+a.cid).html(wpajaxeditcomments.AEC_permdelete),b("#edit"+a.cid).unbind(),b("#edit-comment-user-link-"+a.cid).remove())},"json");return!1});b("#aecconfirmno"+c.cid).bind("click",function(){jQuery.ajaxeditcomments.undo_message(c.cid,"",!1);return!1})}function w(a){var c= d(b(a));f(c.cid);jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_deleting,!1);jQuery.post(ajaxurl,c,function(){b("#comment-undo-"+c.cid).remove();b("#edit-comment-admin-links"+c.cid).html(wpajaxeditcomments.AEC_permdelete)},"json")}function x(a){var c=d(b(a));jQuery.ajaxeditcomments.undo_message(c.cid,wpajaxeditcomments.AEC_restoring,!1);jQuery.post(ajaxurl,c,function(){b("#comment-undo-"+c.cid).remove();b("#edit-comment-admin-links"+ c.cid).html(wpajaxeditcomments.AEC_restored)},"json")}function m(a){var b={},d,e;if(!a)return b;d=a.split("?");d[1]&&(a=d[1]);a=a.split("&");for(e in a)if(!jQuery.isFunction(a.hasOwnProperty)||a.hasOwnProperty(e))d=a[e].split("="),b[d[0]]=d[1];return b}var b=jQuery;b.ajaxeditcomments={init:function(){b.extend(b.ajaxeditcomments.vars,{timers:{},timerObjs:{}});b(".edit-comment-admin-links").css("display","block");b(".edit-comment-user-link").css("display","block");b(".hidden").hide();b(".edit-comment-admin-links").show(); b(".edit-comment-user-link").show();if(wpajaxeditcomments.AEC_CanScroll=="1"){var a=""+window.location;if(/(#[^-]*\-[^&]*)/.test(a))a=b(""+window.location.hash),a=a.offset().top,b("html,body").animate({scrollTop:a},1E3)}o()},delink:function(a){b(".aec-undo-span").html("");q(b(a))},move:function(a){b(".aec-undo-span").html("");return g(b(a))},edit:function(a){b(".aec-undo-span").html("");return g(b(a))},request_deletion:function(a){b(".aec-undo-span").html("");return g(b(a))},request_delete:function(a){b(".aec-undo-span").html(""); v(b(a));return!1},email:function(a){b(".aec-undo-span").html("");return g(b(a))},blacklist_comment:function(a){b(".aec-undo-span").html("");return g(b(a))},approve:function(a){b(".aec-undo-span").html("");r(b(a))},spam:function(a){b(".aec-undo-span").html("");s(b(a))},moderate:function(a){b(".aec-undo-span").html("");t(b(a))},delete_comment:function(a){b(".aec-undo-span").html("");u(b(a))},deleteperm_comment:function(a){b(".aec-undo-span").html("");w(b(a))},restore_comment:function(a){b(".aec-undo-span").html(""); x(b(a))},remove_comment:function(a){var c=b("#comment-"+a);if(c.is("li")||c.is("div"))c.addClass("ajax-delete"),c.slideUp(1E3,function(){c.remove()})},retrieve_element:function(a){return b("#"+a)},update_comment:function(a,c){b("#"+a).html(c)},update_author:function(a,c,d){delinkid=a.match(/\d+$/)[0];d==""||"http://"==d?(b(".aec-delink-"+delinkid+",#delink-comment-"+delinkid).hide(),c==""?b("#"+a).html(wpajaxeditcomments.AEC_Anon):b("#"+a).html(c)):c==""?b("#"+a).html(wpajaxeditcomments.AEC_Anon): (b("#"+a).html("<a href='"+d+"'>"+c+"</a>"),b(".aec-delink-"+delinkid+",#delink-comment-"+delinkid).show())},update_date_or_time:function(a,c){b("#"+a).html(c)},remove_element:function(a){var c=b(a);if(c.is("li")||c.is("div"))c.addClass("ajax-unapprove"),c.slideUp(1E3,function(){c.remove()})},undo_message:function(a,c,d){b("#comment-undo-"+a).html(c);d==!0&&(b(".aec-undo-link").unbind("click"),b(".aec-undo-link").bind("click",function(){b("#comment-undo-"+a).html(wpajaxeditcomments.AEC_undoing);n(b(this)); return!1}))},dropdown:function(a){a=b(a);a=m(a.attr("href"));l(a.cid);return!1},vars:{},get_timer:function(a){p(a)}};var i=b.ajaxeditcomments.vars;b.ajaxeditcomments.init()});